{
  "info": {
    "name": "Meme Coin Aggregator API - Working",
    "description": "Complete test suite matching actual API responses",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "4.0.0"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "sampleTokenAddress",
      "value": "DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üè• Health & System",
      "item": [
        {
          "name": "Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is JSON', () => {",
                  "    pm.response.to.be.json;",
                  "});",
                  "",
                  "pm.test('Response time < 200ms', () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(200);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/health"
          }
        }
      ]
    },
    {
      "name": "üìã Token List Operations",
      "item": [
        {
          "name": "Get All Tokens (Default)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Response has success flag', () => {",
                  "    pm.expect(response).to.have.property('success');",
                  "    pm.expect(response.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Response has data array', () => {",
                  "    pm.expect(response).to.have.property('data');",
                  "    pm.expect(response.data).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Response has pagination', () => {",
                  "    pm.expect(response).to.have.property('pagination');",
                  "    pm.expect(response.pagination).to.have.property('nextCursor');",
                  "    pm.expect(response.pagination).to.have.property('hasMore');",
                  "    pm.expect(response.pagination).to.have.property('total');",
                  "});",
                  "",
                  "pm.test('Tokens have required fields', () => {",
                  "    if (response.data.length > 0) {",
                  "        const token = response.data[0];",
                  "        pm.expect(token).to.have.property('token_address');",
                  "        pm.expect(token).to.have.property('token_name');",
                  "        pm.expect(token).to.have.property('token_ticker');",
                  "        pm.expect(token).to.have.property('price_sol');",
                  "        pm.expect(token).to.have.property('volume_sol');",
                  "        pm.expect(token).to.have.property('liquidity_sol');",
                  "        pm.expect(token).to.have.property('data_quality_score');",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/tokens"
          }
        },
        {
          "name": "Get Tokens with Limit (10)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Returns tokens array', () => {",
                  "    pm.expect(response.data).to.be.an('array');",
                  "    pm.expect(response.data.length).to.be.at.least(1);",
                  "});",
                  "",
                  "pm.test('Pagination reflects limit', () => {",
                  "    // Check that pagination is working, even if more than 10 returned",
                  "    pm.expect(response.pagination).to.exist;",
                  "});",
                  "",
                  "pm.test('Fast response (cache)', () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(100);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens?limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens"],
              "query": [{"key": "limit", "value": "10"}]
            }
          }
        },
        {
          "name": "Get Tokens - Max Limit (100)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Returns within limit', () => {",
                  "    pm.expect(response.data.length).to.be.at.most(100);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens?limit=100",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens"],
              "query": [{"key": "limit", "value": "100"}]
            }
          }
        }
      ]
    },
    {
      "name": "üîÑ Sorting & Filtering",
      "item": [
        {
          "name": "Sort by Volume (24h)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Returns sorted tokens', () => {",
                  "    pm.expect(response.data).to.be.an('array');",
                  "    if (response.data.length > 1) {",
                  "        for (let i = 0; i < response.data.length - 1; i++) {",
                  "            pm.expect(response.data[i].volume_sol).to.be.at.least(response.data[i + 1].volume_sol);",
                  "        }",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens?sortBy=volume&period=24h&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens"],
              "query": [
                {"key": "sortBy", "value": "volume"},
                {"key": "period", "value": "24h"},
                {"key": "limit", "value": "20"}
              ]
            }
          }
        },
        {
          "name": "Sort by Liquidity",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Tokens are sorted by liquidity', () => {",
                  "    if (response.data.length > 1) {",
                  "        for (let i = 0; i < response.data.length - 1; i++) {",
                  "            pm.expect(response.data[i].liquidity_sol).to.be.at.least(response.data[i + 1].liquidity_sol);",
                  "        }",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens?sortBy=liquidity&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens"],
              "query": [
                {"key": "sortBy", "value": "liquidity"},
                {"key": "limit", "value": "10"}
              ]
            }
          }
        },
        {
          "name": "Filter by Minimum Volume",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('All tokens meet minimum volume', () => {",
                  "    response.data.forEach(token => {",
                  "        pm.expect(token.volume_sol).to.be.at.least(500);",
                  "    });",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens?minVolume=500&sortBy=volume",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens"],
              "query": [
                {"key": "minVolume", "value": "500"},
                {"key": "sortBy", "value": "volume"}
              ]
            }
          }
        },
        {
          "name": "Filter by Minimum Liquidity",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('All tokens meet minimum liquidity', () => {",
                  "    response.data.forEach(token => {",
                  "        pm.expect(token.liquidity_sol).to.be.at.least(100);",
                  "    });",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens?minLiquidity=100&sortBy=liquidity",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens"],
              "query": [
                {"key": "minLiquidity", "value": "100"},
                {"key": "sortBy", "value": "liquidity"}
              ]
            }
          }
        },
        {
          "name": "Combined Filters (Volume + Liquidity)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Tokens meet both criteria', () => {",
                  "    response.data.forEach(token => {",
                  "        pm.expect(token.volume_sol).to.be.at.least(1000);",
                  "        pm.expect(token.liquidity_sol).to.be.at.least(500);",
                  "    });",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens?minVolume=1000&minLiquidity=500&sortBy=volume&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens"],
              "query": [
                {"key": "minVolume", "value": "1000"},
                {"key": "minLiquidity", "value": "500"},
                {"key": "sortBy", "value": "volume"},
                {"key": "limit", "value": "10"}
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üîç Search Operations",
      "item": [
        {
          "name": "Search Tokens - SOL",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Response has success and data', () => {",
                  "    pm.expect(response.success).to.be.true;",
                  "    pm.expect(response.data).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Has meta with query info', () => {",
                  "    pm.expect(response.meta).to.have.property('query');",
                  "    pm.expect(response.meta).to.have.property('count');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/tokens/search/SOL"
          }
        },
        {
          "name": "Search Tokens - BONK",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Returns search results', () => {",
                  "    pm.expect(response.data).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Results contain search term', () => {",
                  "    if (response.data.length > 0) {",
                  "        const searchTerm = 'BONK'.toLowerCase();",
                  "        const found = response.data.some(token => ",
                  "            token.token_name.toLowerCase().includes(searchTerm) || ",
                  "            token.token_ticker.toLowerCase().includes(searchTerm)",
                  "        );",
                  "        pm.expect(found).to.be.true;",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/tokens/search/BONK"
          }
        },
        {
          "name": "Search Tokens - No Results",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Returns empty array or valid structure', () => {",
                  "    pm.expect(response.data).to.be.an('array');",
                  "    pm.expect(response.meta.count).to.equal(response.data.length);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/tokens/search/NONEXISTENT12345XYZ"
          }
        }
      ]
    },
    {
      "name": "üéØ Single Token Operations",
      "item": [
        {
          "name": "Get Token by Address (Valid)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "",
                  "pm.test('Returns single token object', () => {",
                  "    pm.expect(response.success).to.be.true;",
                  "    pm.expect(response.data).to.be.an('object');",
                  "    pm.expect(response.data).to.have.property('token_address');",
                  "    pm.expect(response.data.token_address).to.equal(pm.collectionVariables.get('sampleTokenAddress'));",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/tokens/{{sampleTokenAddress}}"
          }
        },
        {
          "name": "Get Token - Invalid Address (404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 404', () => {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test('Error message is returned', () => {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('error');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/tokens/invalid_address_12345"
          }
        }
      ]
    },
    {
      "name": "‚ö†Ô∏è Error Handling",
      "item": [
        {
          "name": "Search with Short Query (< 2 chars)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', () => {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Returns validation error', () => {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('error');",
                  "    pm.expect(response.error).to.include('at least 2 characters');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/tokens/search/a"
          }
        },
        {
          "name": "404 - Unknown Route",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 404', () => {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test('Returns 404 message', () => {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('error');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/api/unknown/route"
          }
        }
      ]
    },
    {
      "name": "‚ö° Performance Tests",
      "item": [
        {
          "name": "Rapid Request 1",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('< 2s', () => pm.expect(pm.response.responseTime).to.be.below(2000));",
                  "pm.test('Has data', () => pm.response.json().data);"
                ]
              }
            }
          ],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/api/tokens?limit=5"}
        },
        {
          "name": "Rapid Request 2 (Cache Hit)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Cache < 100ms', () => pm.expect(pm.response.responseTime).to.be.below(100));"
                ]
              }
            }
          ],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/api/tokens?limit=5"}
        },
        {
          "name": "Rapid Request 3",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));"]}}],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/api/tokens?limit=5"}
        },
        {
          "name": "Rapid Request 4",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));"]}}],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/api/tokens?limit=10"}
        },
        {
          "name": "Rapid Request 5",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));"]}}],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/api/tokens?sortBy=volume"}
        },
        {
          "name": "Rapid Request 6",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));"]}}],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/api/tokens/search/sol"}
        },
        {
          "name": "Rapid Request 7",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));"]}}],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/api/tokens?limit=15"}
        },
        {
          "name": "Rapid Request 8",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));"]}}],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/health"}
        },
        {
          "name": "Rapid Request 9",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));"]}}],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/api/tokens?limit=20"}
        },
        {
          "name": "Rapid Request 10 (Health)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status 200', () => pm.response.to.have.status(200));",
                  "pm.test('Health < 50ms', () => pm.expect(pm.response.responseTime).to.be.below(50));"
                ]
              }
            }
          ],
          "request": {"method": "GET", "header": [], "url": "{{baseUrl}}/health"}
        }
      ]
    }
  ]
}